@{
    ViewBag.Title = "Feedback";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm("Rate", "MyReport", FormMethod.Post, new { @class = "form-horizontal form-label-left", autocomplete = "off" }))
{
<div class="form-horizontal">
    <h4>Rating Report</h4>
    <hr />

    @Html.AntiForgeryToken()
    <div class="form-group">
        <label class="control-label col-md-2" for="rate-comment">Rating:  </label>
        <div class="col-md-10">
            <input class="form-control" hidden type="range" value="0" step="0.5" id="rateReport" name="rating">
            <div class="rateit bigstars" id="rate" data-rateit-mode="font" style="font-size:35px" data-rateit-resetable="false"  data-rateit-ispreset="true" data-rateit-min="0" data-rateit-max="5" data-rateit-backingfld="#rateReport"></div>
            <div>
                <span id="rate-value"></span>
            </div>
        </div>
    </div>

    <div class="form-group rate-comment">
        <label class="control-label col-md-2" for="comment">Comment:  </label>
        <div class="col-md-5">
            <textarea class="form-control mb-2" id="comment" name="comment" rows="5"></textarea>
            @Html.ValidationMessage("Comment", "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Rate" class="btn btn-primary" />
            <a href="@Url.Action("Index")" class="btn btn-link">Cancel</a>
        </div>
    </div>

    <input type="hidden" value="@ViewBag.reportId" name="reportId">
</div>
}

@section Scripts {

    @Scripts.Render("~/bundles/rateit")

    <script type="text/javascript">

        $(document).ready(function(){
            $("#rate").bind('rated', function (event, value) {
                $('#rate-value').text('You\'ve rated: ' + value);
                if (value <= 3) {
                    $('.rate-comment').show();
                } else {
                    $('.rate-comment').hide();
                    $('#comment').val("");
                }
            });
        });
    </script>

}